"use client";

import { Avatar, AvatarFallback } from "@/components/ui/avatar";
import { Button } from "@/components/ui/button";
import { Card, CardContent } from "@/components/ui/card";
import { useToast } from "@/hooks/use-toast";
import { cn } from "@/lib/utils";
import { Message } from "@/types/chat";
import { Check, Copy } from "lucide-react";
import { useEffect, useState } from "react";
import ReactMarkdown from "react-markdown";

interface AiMessageProps {
  message: Message;
}

export function AiMessage({ message }: AiMessageProps) {
  const { toast } = useToast();
  const [ copied, setCopied ] = useState( false );
  const speed = 10;
  const [displayedText, setDisplayedText] = useState("");
  
  useEffect(() => {
    let index = 0;
    const interval = setInterval(() => {
      setDisplayedText((prev) => prev + message.content.charAt(index));
      index++;
      if (index >= message.content.length) clearInterval(interval);
    }, speed);

    return () => clearInterval(interval);
  }, [message.content, speed]);

  const copyToClipboard = () => {
    navigator.clipboard.writeText(message.content);
    setCopied(true);
    toast({
      description: "Copied to clipboard",
    });
    setTimeout(() => setCopied(false), 2000);
  };

  return (
    <div className="flex items-start gap-4">
      <Avatar className="h-8 w-8 bg-primary">
        <AvatarFallback className="bg-primary/10">
        <svg xmlns="http://www.w3.org/2000/svg" height={60} width={60} viewBox="0 0 1000 1000" id="artificial-intelligence">
        <path fill="#e1e1ff" d="M353 724.45a1.17 1.17 0 0 1-1.17-1.15c-.27-9.3-.72-16.22-1.29-24.29l-.05-.78c-.37-5.47-.75-11.12-1-17.75-1-22-8.41-32.26-26.61-36.54-8.86-2.08-16.8-2.73-25.21-3.42-2.87-.23-5.88-.47-9-.79-2.69-.26-5.63-.35-8.75-.45h-.71a113.21 113.21 0 0 1-12.65-.85c-14.36-2.15-26.14-9.37-33.18-20.31-7.68-11.92-9.37-27.44-4.75-43.72 3-10.53 3.16-17.61-4.54-24.84-7.32-6.87-5.33-14.74-2.38-20.13l1.55-2.82-2.48-2c-11.31-9.33-12.25-14.54-5.59-30.93 3.21-7.91 1.61-12.81-5.16-15.91-2.5-1.14-5-2.1-7.48-3l-1.48-.57c-1-.38-2-.76-3-1.16-9.33-3.8-15.13-9-17.24-15.37a18.84 18.84 0 0 1-.92-5.87c0-5.3 2-11.33 6-17.9 10.33-17 22.67-36.94 35.88-56.28 8.8-12.86 11.82-26 10.42-45.43-5.58-77 31.48-120.81 59.84-147.11 38.45-35.66 95.54-56.11 156.62-56.11 49.82 0 98.45 13.79 136.91 38.83 33.18 21.6 55.19 50.92 65.4 87.13l2.54 9 22.72-40.47a1.15 1.15 0 0 1 1-.6 1.29 1.29 0 0 1 .36.05l25.9 7.81a1.16 1.16 0 0 1 .83 1.2L700.69 281l33.77 25 46-17.77a1.25 1.25 0 0 1 .42-.07 1.18 1.18 0 0 1 1 .52l15 22.52a1.18 1.18 0 0 1-.13 1.48l-34.11 35.54 10.17 42 46.62 16a1.17 1.17 0 0 1 .78 1.24l-3 26.91a1.18 1.18 0 0 1-1 1l-49 5.27L748 479.3l25.39 42.23a1.19 1.19 0 0 1-.19 1.47l-19.62 18.65a1.19 1.19 0 0 1-.82.33 1.12 1.12 0 0 1-.64-.2l-40.9-27.51-39.58 17.23-7.74 48.66a1.19 1.19 0 0 1-1.09 1l-27.1 1.65a1.2 1.2 0 0 1-1.14-.87l-13.58-47.3-10.73-2.61-1.07 3.52c-12.44 41-13.81 79.88-4.31 122.43l.32 1.46c1.38 6.15 2.95 13.1 3.87 19.95a331.44 331.44 0 0 1 3.1 43.85 1.18 1.18 0 0 1-1.18 1.18Z"></path>
        <path fill="#a6a6ff" d="m819.37 406.23-46.62-16-10.16-42 34.1-35.54a1.2 1.2 0 0 0 .13-1.49l-15-22.53a1.17 1.17 0 0 0-1-.52 1.14 1.14 0 0 0-.43.08L734.46 306l-33.77-25 3.66-49.15a1.17 1.17 0 0 0-.84-1.21l-25.9-7.8a1.12 1.12 0 0 0-.36-.05 1.14 1.14 0 0 0-1 .6l-20.09 35.79-2.63 4.68-1.53-5.28-1-3.73c-10.21-36.2-32.22-65.52-65.41-87.13-38.46-25-87.09-38.83-136.92-38.83-61.08 0-118.17 20.45-156.62 56.11-28.36 26.3-65.42 70.15-59.84 147.1 1.41 19.4-1.61 32.57-10.41 45.43-13.22 19.34-25.56 39.3-35.89 56.28-4 6.57-6 12.6-6 17.9a18.81 18.81 0 0 0 .92 5.87c2.11 6.39 7.91 11.56 17.24 15.36q1.48.6 3 1.17l1.46.57c2.45.93 5 1.91 7.49 3 6.77 3.1 8.36 8 5.16 15.92-6.66 16.4-5.73 21.61 5.59 30.94l2.48 2-1.54 2.81c-3 5.39-4.94 13.26 2.37 20.13 7.71 7.23 7.54 14.31 4.55 24.85-4.61 16.27-2.93 31.8 4.74 43.72 7.05 10.94 18.83 18.15 33.18 20.3a113.46 113.46 0 0 0 12.65.86h.7c3.12.09 6.07.19 8.76.44 3.16.32 6.17.57 9 .79 8.4.69 16.34 1.34 25.21 3.42 18.2 4.28 25.65 14.52 26.61 36.54.29 6.62.67 12.28 1 17.74l.05.78c.57 8.06 1 15 1.3 24.28a1.17 1.17 0 0 0 1.17 1.15h257.9a1.18 1.18 0 0 0 1.18-1.18 333.1 333.1 0 0 0-3.1-43.85c-.93-6.84-2.49-13.79-3.88-19.95l-.32-1.46c-9.48-42.46-8.13-81.32 4.25-122.22 0-.06 0-.14.06-.21l1.06-3.51L614 533l6.92 1.68L634.46 582a1.2 1.2 0 0 0 1.14.87l27.1-1.65a1.2 1.2 0 0 0 1.09-1l7.74-48.66 39.57-17.26 40.9 27.52a1.15 1.15 0 0 0 .65.19 1.14 1.14 0 0 0 .82-.34L773.08 523a1.18 1.18 0 0 0 .19-1.46l-25.39-42.23 19.21-38.67 49-5.26a1.21 1.21 0 0 0 1-1l3-26.91a1.16 1.16 0 0 0-.72-1.24Zm-220.7 253.14.32 1.48c1.43 6.36 2.9 12.95 3.77 19.42a329.15 329.15 0 0 1 3 37.94H357.89c-.29-7.38-.73-13.57-1.14-19.6-.39-5.72-.79-11.48-1.09-18.38-1.08-25.09-10.18-37.36-31.42-42.36-9.33-2.19-17.51-2.85-26.18-3.55-2.88-.23-5.82-.47-8.9-.78-2.9-.27-6.29-.39-9.72-.49a113.09 113.09 0 0 1-12.07-.78c-12.73-1.92-22.7-8-28.85-17.52-6.7-10.38-8.11-24.1-4-38.63 2.73-9.63 4.73-20.78-6.27-31.11-1.74-1.63-6.35-6 .76-15.57a5.07 5.07 0 0 0-1-7.06c-12.65-9.54-13.18-11.52-7.14-26.4s-2.67-21.34-8.37-23.98c-2.58-1.19-5.24-2.2-7.88-3.21-1.43-.54-2.86-1.09-4.28-1.66-7.54-3.07-12.13-7-13.65-11.54-1.58-4.78-.05-11 4.52-18.57 10.37-17 22.71-37 35.7-56 9.55-14 13-28.74 11.48-49.41-5.31-73.44 28.13-114.5 57.86-142.09 70.85-65.68 199.09-73.14 285.89-16.62 33.73 22 55.37 52.11 64.39 89.68l-15.93.48c-5.07-10.23-14.17-18.48-28.76-21.43-26.77-5.39-44.2 13.93-52.07 29.27l-42.28-43.6a5 5 0 0 0-2.36-1.37l-56.93-14.84v-.57a18.5 18.5 0 1 0-3.11 10.24l56.1 14.62L537 272.35a51.63 51.63 0 0 0-24 7 40.77 40.77 0 0 0-19.14 25.77l-48-35.15a18.31 18.31 0 0 0 2.42-9.13 18.51 18.51 0 1 0-9.8 16.29l47.4 34.7a43.22 43.22 0 0 0-10.54 6.07l-62.39 2.22L376 304.36a18.29 18.29 0 0 0 1.1-6.27 18.51 18.51 0 1 0-7.26 14.66l40.14 17.14a5 5 0 0 0 2 .41h.18l53-1.89a70.58 70.58 0 0 0-9.72 18.46 44.92 44.92 0 0 0-3.5 18.24l-33.65 8a5 5 0 0 0-1.83.84l-36.63 26.87a18.49 18.49 0 1 0 5.11 8.81l36.68-26.91 31.52-7.47a46.09 46.09 0 0 0 12.09 22c-4.52 7.54-6.23 19.46-5.68 28.93l-36 11.52a18.46 18.46 0 1 0 2.72 9.77l35-11.23a35 35 0 0 0 7.22 12.85c5.39 6 11.29 10.11 17.37 12.31L451 490l-39.09 4.48a18.47 18.47 0 1 0 .32 10.17l41.41-4.77a5 5 0 0 0 2.64-1.11l34.82-28.59c-1.48 8.31-1.23 18.44 4.74 26.33 3.67 4.85 8.92 8.06 15.68 9.62l-31.94 13.18a5.11 5.11 0 0 0-2 1.5l-22.14 27.38a18.5 18.5 0 1 0 7.36 7l21.85-27 51-21.06c3.66 12.64 13.82 30 34.69 32.56a50.17 50.17 0 0 0 5.66.31c9.07 0 15.89-2.89 21-7.12l5.88 1.44c-12.55 41.8-13.88 81.68-4.21 125.05Z"></path>
        <g>
          <path d="m657.29 269.88-.06.1a4.87 4.87 0 0 1-.34.51l-.05.06c-.12.16-.25.31-.38.45l-.31.29a1.6 1.6 0 0 1-.29.23 4.31 4.31 0 0 1-.43.3c-.17.1-.34.18-.51.27h-.12a3.23 3.23 0 0 1-.56.21 1.9 1.9 0 0 1-.39.1h-.25a3.17 3.17 0 0 1-.49.05h-.29a5.08 5.08 0 0 1-5-4.06c-.4-2-.83-3.94-1.31-5.87-9-37.58-30.67-67.71-64.39-89.68-86.79-56.53-215-49.06-285.89 16.62-29.73 27.58-63.18 68.65-57.86 142.09 1.5 20.67-1.93 35.45-11.48 49.41-13 19-25.33 38.95-35.7 56-4.58 7.53-6.1 13.79-4.52 18.57 1.52 4.58 6.11 8.46 13.65 11.54 1.41.57 2.85 1.11 4.28 1.66 2.64 1 5.3 2 7.88 3.21 5.7 2.61 14.36 9.18 8.36 23.94s-5.51 16.86 7.14 26.4a5.07 5.07 0 0 1 1 7.06c-7.12 9.59-2.5 13.93-.76 15.57 11 10.33 9 21.48 6.27 31.11-4.12 14.53-2.71 28.24 4 38.63 6.16 9.54 16.12 15.61 28.85 17.52a113.09 113.09 0 0 0 12.07.78c3.43.1 6.82.22 9.72.49 3.08.31 6 .54 8.9.78 8.67.7 16.85 1.36 26.18 3.55 21.24 5 30.34 17.27 31.42 42.36.3 6.9.7 12.66 1.09 18.38.41 6 .86 12.22 1.14 19.6h247.9a329.15 329.15 0 0 0-3-37.94c-.87-6.47-2.35-13.05-3.77-19.42l-.32-1.48c-9.68-43.34-8.33-83.25 4.26-125.06.52-1.74 1.06-3.49 1.63-5.24a5.08 5.08 0 0 1 5.5-3.46 5.19 5.19 0 0 1 .87.19l.16.05a5.08 5.08 0 0 1 3.12 6.33l-.26.8c-.4 1.24-.78 2.49-1.15 3.72-12.22 40.27-13.56 78.69-4.24 120.45l.32 1.48c1.48 6.57 3 13.36 3.93 20.26a335.33 335.33 0 0 1 3.14 44.37 5.07 5.07 0 0 1-5.07 5.07H353a5.06 5.06 0 0 1-5.05-4.93c-.27-9.44-.75-16.57-1.28-24.12-.39-5.78-.79-11.64-1.1-18.63-.88-20.43-7.05-29-23.62-32.92-8.59-2-16.41-2.66-24.68-3.33-2.93-.23-5.94-.48-9.07-.79-2.71-.26-5.85-.35-9.06-.45a116.9 116.9 0 0 1-13.25-.89c-15.46-2.32-28.2-10.15-35.87-22-8.3-12.87-10.15-29.51-5.22-46.88 3-10.71 2.23-15.61-3.46-20.95-7.15-6.71-8.19-15.59-3.12-24.83-12.88-10.63-13.87-17.8-6.71-35.4 2.72-6.71 1-9-3.18-10.91-2.4-1.09-4.85-2-7.3-3-1.49-.58-3-1.14-4.47-1.75-10.42-4.25-17-10.21-19.46-17.74a22.61 22.61 0 0 1-1.11-7.09c0-6 2.2-12.7 6.6-19.92 10.43-17.15 22.88-37.25 36-56.45 8.26-12.07 11.08-24.5 9.75-43-5.7-78.61 32.12-123.4 61.08-150.24 74-68.65 207.86-76.57 298.3-17.68 34 22.15 56.54 52.17 67 89.33.51 1.78 1 3.58 1.44 5.39q.89 3.6 1.63 7.31a5.11 5.11 0 0 1-.5 3.52Z"></path>
          <g>
            <path d="M639.19 512.31a5.07 5.07 0 1 1-.2-10.13h.2A99.36 99.36 0 0 0 649.53 304a5.07 5.07 0 0 1 1-10.08 109.49 109.49 0 0 1-11.38 218.39Z"></path>
            <path d="m824 407.91-3 26.9a5.07 5.07 0 0 1-4.5 4.47l-46.87 5-17.32 34.84 24.29 40.4a5.07 5.07 0 0 1-.84 6.29l-19.62 18.65a5.07 5.07 0 0 1-6.33.53l-39.11-26.27-35.7 15.53-7.4 46.56a5.08 5.08 0 0 1-4.69 4.26l-27 1.65h-.31a5.08 5.08 0 0 1-4.87-3.67l-13-45.15-5-1.21-3.73-.89-6.08-1.48-5.92-1.44-2.4-.58a5.06 5.06 0 1 1 2.39-9.84l7.58 1.84 5.44 1.32 1 .25 11.92 2.9a5.07 5.07 0 0 1 3.68 3.53l12.65 44.07 18.91-1.15 7.19-45.29a5.07 5.07 0 0 1 3-3.85l40.78-17.74a5 5 0 0 1 4.85.44l38 25.59 13.74-13.05L742.21 482a5.09 5.09 0 0 1-.21-4.87l19.79-39.82a5 5 0 0 1 4-2.77l45.6-4.91 2.1-18.82-43.37-14.88a5.06 5.06 0 0 1-3.28-3.59l-10.47-43.21a5 5 0 0 1 1.27-4.7l31.74-33.08-10.5-15.77-42.78 16.52a5 5 0 0 1-4.85-.65l-34.8-25.81a5.05 5.05 0 0 1-2-4.45l3.4-45.73-18.17-5.46-22.39 39.88-.06.1a4.87 4.87 0 0 1-.34.51l-.05.06c-.12.16-.25.31-.38.45l-.31.29a1.6 1.6 0 0 1-.29.23 4.31 4.31 0 0 1-.43.3c-.17.1-.34.18-.51.27h-.12a3.23 3.23 0 0 1-.56.21 1.9 1.9 0 0 1-.39.1h-.25a3.17 3.17 0 0 1-.49.05h-.29l-18.64.58-3.28.1a5.07 5.07 0 0 1-.32-10.14l15.93-.48 3.25-.1 2.23-4 2.68-4.78 18.13-32.3a5.06 5.06 0 0 1 5.87-2.37l25.92 7.82a5 5 0 0 1 3.59 5.22l-3.5 47 30.33 22.49 44-17a5.09 5.09 0 0 1 6.05 1.92l15 22.53a5.07 5.07 0 0 1-.56 6.33l-32.64 34 9.14 38 44.6 15.28a5.06 5.06 0 0 1 3.4 5.36Z"></path>
            <g>
              <g>
                <path d="M635.64 292.36a6.93 6.93 0 0 1-2.55 4.89 7.29 7.29 0 0 1-5.48 1.54c-1-.18-5 .18-12.07 10.29l2.2 15.42a5.06 5.06 0 0 1-4.29 5.73 3.51 3.51 0 0 1-.73.06 5.08 5.08 0 0 1-5-4.35l-2.2-15.33a10.31 10.31 0 0 1 1.72-7.32c6.34-9.11 12.42-13.92 18.47-14.59.32-11.39-2.4-32.33-25.87-37.07-24.65-5-37.69 16.82-42 26.07-.95 2-1.48 3.41-1.63 3.84a.47.47 0 0 1-.05.14 3.13 3.13 0 0 1-.13.31 4.89 4.89 0 0 1-1.09 1.57 3.19 3.19 0 0 1-.32.29l-.26.19a4.75 4.75 0 0 1-1.43.71l-.25.08a5.53 5.53 0 0 1-.79.13h-.97l-.36-.05c-.13 0-.29-.05-.41-.09a1.8 1.8 0 0 1-.43-.13c-.25-.09-.48-.19-.7-.3a5.78 5.78 0 0 1-.66-.43c-.1-.09-.21-.17-.3-.26a1.87 1.87 0 0 1-.29-.27 5.07 5.07 0 0 1-1.1-5.16c.52-1.48 1.17-3.06 1.93-4.72.38-.84.79-1.69 1.24-2.55 7.87-15.33 25.3-34.66 52.07-29.27 14.6 2.94 23.69 11.2 28.76 21.43a47.25 47.25 0 0 1 3.6 10 61.36 61.36 0 0 1 1.37 19.2Z"></path>
                <path d="M581.93 307.65a12.81 12.81 0 0 1-5 8.59c-4.68 3.53-5.33 6.95-2.38 12.65a5.07 5.07 0 0 1-9 4.64c-6.56-12.74-.73-20.84 5.33-25.39a2.76 2.76 0 0 0 1.08-1.84 2.84 2.84 0 0 0-.6-2.16c-7.32-9.46-14.78-16.09-22.14-19.68-6.79-3.25-20.29-2.83-31 3.6-6.49 3.86-14.35 11.37-15.4 25.21 0 .38-.06.76-.08 1.15a1.43 1.43 0 0 1 0 .23 4 4 0 0 1-.27 1.23l-.16.4s-.13.26-.21.39a2.74 2.74 0 0 1-.41.62 1.17 1.17 0 0 1-.23.27 4.34 4.34 0 0 1-.67.62 5 5 0 0 1-.79.49 4.74 4.74 0 0 1-1.78.49h-.87a5.06 5.06 0 0 1-4.82-5.3c.06-1.43.19-2.84.38-4.21a44.66 44.66 0 0 1 .88-4.61 40.77 40.77 0 0 1 19.14-25.77 51.63 51.63 0 0 1 24-7 40.55 40.55 0 0 1 11.54 1.17 28 28 0 0 1 5 1.83c.3.14.58.3.88.45 1.13.57 2.24 1.19 3.36 1.89 7.35 4.47 14.56 11.26 21.5 20.26a12.88 12.88 0 0 1 2.72 9.78Z"></path>
                <path d="M502.65 313.79a4 4 0 0 1 0 .88 4 4 0 0 1-.27 1.23l-.16.4s-.13.26-.21.39a2.74 2.74 0 0 1-.41.62 1.17 1.17 0 0 1-.23.27 4.34 4.34 0 0 1-.67.62 5 5 0 0 1-.79.49 5.25 5.25 0 0 1-1.85.51h-.31a26.44 26.44 0 0 0-3.1.51 33.71 33.71 0 0 0-13.67 6.64c-.29.22-.57.44-.86.69-5.5 4.63-11.12 11.94-15.26 23.49-.54 1.26-9.35 21.92 7.66 39.49.88.92 1.84 1.84 2.88 2.73a5.08 5.08 0 0 1 .51 7.15 5.61 5.61 0 0 1-.64.61.78.78 0 0 0-.13.09l-.05.05a5.08 5.08 0 0 1-6.34-.26c-1.24-1.08-2.4-2.18-3.49-3.31a46.09 46.09 0 0 1-12.09-22 46.83 46.83 0 0 1-1.21-10.12 44.92 44.92 0 0 1 3.5-18.24 70.58 70.58 0 0 1 9.72-18.46 52.76 52.76 0 0 1 10.2-10.5 43.22 43.22 0 0 1 10.54-6.07 38.54 38.54 0 0 1 7.1-2.1 36.54 36.54 0 0 1 4.28-.6 4.78 4.78 0 0 1 3.11.75l.26.19a5.63 5.63 0 0 1 .53.44 5.85 5.85 0 0 1 .47.52c.12.16.23.31.34.48a4.63 4.63 0 0 1 .26.51 4.86 4.86 0 0 1 .38 1.91Z"></path>
                <path d="M544.41 403.05a5.06 5.06 0 0 1-5.28 4.83c-11.78-.53-20.92-4-27.21-18.83-11.9-2.09-23.59 1.59-36.77 11.59a.78.78 0 0 0-.13.09l-.05.05c-4.48 4.25-7.18 22.24-4.39 31.41a25.88 25.88 0 0 0 5.42 10.07c4.41 4.86 13.34 12.61 23.88 10.45l.35-.06a5.06 5.06 0 1 1 2.23 9.88 25.43 25.43 0 0 1-2.57.45 25.84 25.84 0 0 1-3.73.26 27.37 27.37 0 0 1-3.25-.19 30.48 30.48 0 0 1-7-1.66c-6.08-2.2-12-6.35-17.37-12.31a35 35 0 0 1-7.22-12.85c-.13-.35-.23-.71-.35-1.08a39.4 39.4 0 0 1-1.43-9c-.56-9.47 1.15-21.39 5.68-28.93a19.13 19.13 0 0 1 3.4-4.26c1.3-1 2.58-1.92 3.86-2.81 13.91-9.62 27-13.26 40.14-11.26q1.09.18 2.18.39a8.71 8.71 0 0 1 6.33 5.34l.05.12c4.38 10.64 9.25 12.62 18.47 13a5.06 5.06 0 0 1 4.76 5.31Z"></path>
                <path d="M569.32 397.45c-11.43 9-17 20-16.94 33.73a16.11 16.11 0 0 1-1.75 7.73c-7.69 14.31-23.4 22.19-46.7 23.4-3 6.7-5.81 20.36 0 28 6.08 8 20.06 7.52 31.68 5.34.84-.16 1.67-.32 2.49-.49a.51.51 0 0 1 .18 0l.4-.06a4.58 4.58 0 0 1 1.52 0 3.88 3.88 0 0 1 .41.09 5 5 0 0 1 1.19.48 5.3 5.3 0 0 1 .69.47l.32.27.3.31a2.13 2.13 0 0 1 .27.32 5.54 5.54 0 0 1 .64 1.11 3.55 3.55 0 0 1 .17.48c0 .13.08.26.1.39a.22.22 0 0 1 0 .09 4.33 4.33 0 0 1 .09 1.35v.5a1.93 1.93 0 0 1-.08.38 4.8 4.8 0 0 1-.49 1.23 3.2 3.2 0 0 1-.22.35 4.84 4.84 0 0 1-1 1.11l-.25.18a5.46 5.46 0 0 1-1 .56l-.12.05a5 5 0 0 1-.75.22c-1.71.36-3.38.69-5 1a80.89 80.89 0 0 1-13.2 1.19 47.64 47.64 0 0 1-10.67-1.11c-6.77-1.56-12-4.77-15.68-9.62-6-7.88-6.22-18-4.74-26.33a59 59 0 0 1 1.75-7.12 43.74 43.74 0 0 1 2.66-6.61 7.84 7.84 0 0 1 2.68-2.92 8.3 8.3 0 0 1 1.63-.8 8 8 0 0 1 2.41-.47c20.16-.83 33.43-6.93 39.44-18.13a6.25 6.25 0 0 0 .54-2.9c0-16.76 7-30.8 20.8-41.71a5.07 5.07 0 0 1 6.27 8Z"></path>
                <path d="M544.41 500.49v.5a1.93 1.93 0 0 1-.08.38 4.8 4.8 0 0 1-.49 1.23 3.2 3.2 0 0 1-.22.35 4.84 4.84 0 0 1-1 1.11l-.25.18a5.46 5.46 0 0 1-1 .56l-.12.05-5.47 2.26-51 21.06-21.85 27-2 2.41a5.07 5.07 0 0 1-3.94 1.88 5.07 5.07 0 0 1-3.94-8.26l2.48-3.06 22.14-27.38a5.11 5.11 0 0 1 2-1.5l31.94-13.18 23.85-9.85 2-.83a4.68 4.68 0 0 1 .69-.22.51.51 0 0 1 .18 0l.4-.06a4.58 4.58 0 0 1 1.52 0 3.88 3.88 0 0 1 .41.09 5 5 0 0 1 1.19.48 5.3 5.3 0 0 1 .69.47l.32.27.3.31a2.13 2.13 0 0 1 .27.32 5.54 5.54 0 0 1 .64 1.11 3.55 3.55 0 0 1 .17.48 3.64 3.64 0 0 1 .12.48 4.33 4.33 0 0 1 .05 1.36Z"></path>
                <path d="M613.82 501.15c-.3.71-.58 1.89-1 3.34-1.28 4.63-3.5 12.59-8.2 19.81a36.58 36.58 0 0 1-7.57 8.58c-5.16 4.23-12 7.12-21 7.12a50.17 50.17 0 0 1-5.61-.34c-20.87-2.51-31-19.92-34.69-32.56-.1-.36-.19-.73-.29-1.08a43.58 43.58 0 0 1-1.08-5.21 5 5 0 0 1 .27-2.48c.26-.69.52-1.39.79-2.09.08-.18.14-.38.22-.56 5.61-14.31 14-29.54 29.27-33.86-10-14.71-8.89-29.83 3.32-44.06a5.06 5.06 0 1 1 7.69 6.6c-10.55 12.29-10.1 24 1.48 36.94.19.23.4.45.61.69a5.22 5.22 0 0 1-4.06 8.76h-.49c-12.25.22-20.93 9.22-28.85 29.83 1.06 5.39 6.52 26.52 27 29 20.17 2.48 27.05-11.94 31.47-27.8 1-3.49 1.5-5.39 2.77-6.84a5.07 5.07 0 0 1 8 6.21Z"></path>
                <path d="M585.69 472.46a48.87 48.87 0 0 1-14.47-2.31 5.07 5.07 0 0 1 3-9.68c15.87 4.92 28.64.16 36.93-13.78a5.07 5.07 0 0 1 8.72 5.17c-8.02 13.49-20.06 20.6-34.18 20.6zm-70.02-82.72a5.06 5.06 0 0 1-4.71-6.94c7-17.57 11.34-26 33.91-26.32h.07a5.07 5.07 0 0 1 .07 10.13c-16.22.21-18.16 3.66-24.62 19.93a5.06 5.06 0 0 1-4.72 3.2zm56.38-29.22a5.07 5.07 0 0 1-3.4-8.83c14.7-13.27 33.7-16.66 56.49-10.06a5.07 5.07 0 0 1-2.82 9.74c-19.44-5.66-34.78-3.09-46.87 7.84a5 5 0 0 1-3.4 1.31zm-71.52 101.9-.67.56-8.74 7.18-34.82 28.59a5 5 0 0 1-2.64 1.11l-41.41 4.77-4.43.51a4.46 4.46 0 0 1-.58 0c-2.54 0-2.07-1.79-2.36-4.37-.32-2.77-1-5.42 1.79-5.74l5.26-.61L451 490l34.82-28.59 8.27-6.79a5.05 5.05 0 0 1 7.13.7 5.06 5.06 0 0 1-.69 7.1zM466 434.71l-4.72 1.52-35 11.23-3.53 1.13a5 5 0 0 1-1.54.25 5.07 5.07 0 0 1-1.56-9.89l3.9-1.26 36-11.52 3.4-1.09a5.06 5.06 0 1 1 3.1 9.64zM458.1 374l-5 1.19-31.52 7.47-36.73 26.94-2.71 2a5 5 0 0 1-3 1 5.06 5.06 0 0 1-3-9.15l3.59-2.63 36.63-26.87a5 5 0 0 1 1.83-.84l33.65-8 3.91-.92a5.06 5.06 0 1 1 2.35 9.81zm24.24-51.27a5 5 0 0 1-1.41 3.68 3.9 3.9 0 0 1-.86.69 5 5 0 0 1-2.55.8l-12.38.44-53 1.89h-.18a5 5 0 0 1-2-.41l-40.16-17.07-2.68-1.14a5.07 5.07 0 1 1 4-9.32l4.86 2.07 36.93 15.76 62.39-2.22 1.81-.06a5 5 0 0 1 5.23 4.89z"></path>
                <path d="M620.47 397.71a5.06 5.06 0 0 1-5 4.06 5.6 5.6 0 0 1-1-.1C591.58 397 576 383 568.18 360c-38.87-6.08-63-19.26-73.58-40.21-.39-.76-.75-1.53-1.1-2.31l-7.69-5.63-47.4-34.7-2.18-1.59a5.07 5.07 0 0 1 6-8.19l3.58 2.62 48 35.15 6.51 4.77.26.19a5.63 5.63 0 0 1 .53.44 5.85 5.85 0 0 1 .47.52c.12.16.23.31.34.48a4.63 4.63 0 0 1 .26.51 1 1 0 0 1 .1.21c.14.35.29.69.45 1 8.48 19.07 30.67 31.13 67.76 36.81h.06a8.72 8.72 0 0 1 7 5.92c.12.38.25.74.38 1.1 6.7 19.37 19.34 30.71 38.6 34.61a5.06 5.06 0 0 1 3.94 6.01zm-64.3-116.19a.47.47 0 0 1-.05.14 3.13 3.13 0 0 1-.13.31 4.89 4.89 0 0 1-1.09 1.57 3.19 3.19 0 0 1-.32.29l-.26.19a4.75 4.75 0 0 1-1.43.71l-.25.08a5.53 5.53 0 0 1-.79.13h-.97l-.36-.05c-.13 0-.29-.05-.41-.09a1.8 1.8 0 0 1-.43-.13 3.64 3.64 0 0 1-.52-.21.79.79 0 0 1-.18-.09 5.78 5.78 0 0 1-.66-.43c-.1-.09-.21-.17-.3-.26a2 2 0 0 1-.25-.22v-.05l-10.71-11-35.86-36.98-56.1-14.62-3.59-.93a5.07 5.07 0 0 1 2.55-9.81l4.13 1.08L505.12 226a5 5 0 0 1 2.36 1.37L549.76 271l4.68 4.83.57.58a5.05 5.05 0 0 1 1.16 5.11z"></path>
              </g>
              <path d="M429.72 242.37A18.47 18.47 0 1 0 445.78 270a18.31 18.31 0 0 0 2.42-9.13 18.51 18.51 0 0 0-18.48-18.5zm-8.33 18.48a8.34 8.34 0 1 1 8.33 8.33 8.35 8.35 0 0 1-8.33-8.33zm-62.8 18.77A18.46 18.46 0 1 0 376 304.36a18.29 18.29 0 0 0 1.1-6.27 18.49 18.49 0 0 0-18.51-18.47zm-8.35 18.47a8.34 8.34 0 1 1 8.35 8.35 8.36 8.36 0 0 1-8.35-8.35zm34.61 111.51a18.45 18.45 0 1 0 .56 4.49 18.36 18.36 0 0 0-.56-4.49zm-17.91 12.82a8.34 8.34 0 1 1 8.33-8.33 8.36 8.36 0 0 1-8.33 8.33zm56.56 15.25a18.46 18.46 0 1 0 2.72 9.77v-.14a18.33 18.33 0 0 0-2.72-9.63zm-15.76 18a8.34 8.34 0 1 1 8.35-8.35 8.36 8.36 0 0 1-8.35 8.33zm55.09 99.52a18.46 18.46 0 1 0 2.54 9.33 18.24 18.24 0 0 0-2.54-9.33zm-15.93 17.66a8.33 8.33 0 1 1 8.33-8.33 8.35 8.35 0 0 1-8.33 8.33zm-34.97-78.39a18.59 18.59 0 1 0 .88 5.65 18.51 18.51 0 0 0-.88-5.65zm-17.59 14a8.34 8.34 0 1 1 8.33-8.33 8.35 8.35 0 0 1-8.33 8.32zm35.38-316.37a18.48 18.48 0 1 0 15.37 28.72 18.25 18.25 0 0 0 3.1-9.67v-.57a18.51 18.51 0 0 0-18.47-18.48zm0 26.82a8.34 8.34 0 1 1 8.35-8.33 8.34 8.34 0 0 1-8.35 8.32z"></path>
            </g>
          </g>
        </g>
      </svg>
        </AvatarFallback>
      </Avatar>
      <div className="flex-1 group">
        <div className="mb-1 flex items-center justify-between">
          <div className="text-sm font-medium">AI Assistant</div>
          <Button
            variant="ghost"
            size="icon"
            className={cn(
              "h-8 w-8 opacity-0 transition-opacity",
              "group-hover:opacity-100",
              copied && "text-green-500"
            )}
            onClick={copyToClipboard}
          >
            {copied ? (
              <Check className="h-4 w-4" />
            ) : (
              <Copy className="h-4 w-4" />
            )}
            <span className="sr-only">Copy message</span>
          </Button>
        </div>
        <Card className="border-none">
          <CardContent className="p-3 text-sm prose prose-sm dark:prose-invert max-w-none">
            <div className="whitespace-pre-wrap markdown-content">
              <ReactMarkdown>{displayedText}</ReactMarkdown>
            </div>
          </CardContent>
        </Card>
      </div>
    </div>
  );
}